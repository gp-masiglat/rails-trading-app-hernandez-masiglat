<p style="color: green"><%= notice %></p>

<h1>Stocks</h1>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Company Symbol</th>
      <th scope="col">Company Name</th>
      <th scope="col">Stock Price</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
    <tbody>
  <% @companies.each do |company| %>
    <tr>
      <td><%= image_tag company[:logo], alt: 'Image Description', size: '50x50' %>  <%= company[:symbol] %></td>
      <td><%= company[:name] %></td>
      <td><%= company[:price] %></td>
      <td><%= button_to "View", show_stocks_path_url(company[:symbol]), method: :get, :class => 'btn btn-link' %>|Buy|Sell</td>
    </tr>
    <% end %>
    </tbody>
  </table>

<%= link_to "New stock", new_stock_path %>
<% if current_user %>
  <h1>Portfolio</h1>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Company Symbol</th>
        <th scope="col">Company Name</th>
        <th scope="col">Stock Price</th>
        <th scope="col">Quantity Held</th>
        <th scope="col">Total Value</th>
      </tr>
    </thead>
      <tbody>
    <% @portfolio.each do |item| %>
      <tr>
        <td><%= image_tag item[:logo], alt: 'Image Description', size: '50x50' %>  <%= item[:symbol] %></td>
        <td><%= item[:name] %></td>
        <td><%= item[:price] %></td>
        <td><%= item[:quantity] %></td>
        <td><%= item[:quantity] * item[:price] %></td>
        <td><%= button_to "View", show_stocks_path_url(item[:symbol]), method: :get, :class => 'btn btn-link' %>|Buy|Sell</td>
      </tr>
      <% end %>
      </tbody>
    </table>
  <% end %>