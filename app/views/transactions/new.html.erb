<h1>New transaction</h1>

<%# render "form", transaction: @transaction, stock: @stock %>

<br>

<div>
  <%= link_to "Back to transactions", transactions_path %>
</div>


<%= form_with(model: @transactions)  do |form| %>


  <div>
    <%= form.label :user_id, style: "display: block" %>
    <%= form.number_field :user_id , value: @user[:id] %>
  </div>

  <div>
    <%= form.label :transaction_type, style: "display: block" %>
    <%= form.text_field :transaction_type, value: params[:trans_type] %>
  </div>

  <div>
    <%= form.label :stock_name, style: "display: block" %>
    <%= form.text_field :stock_name ,value: @company[:symbol]  %>
  </div>

  <div>
    <label for="current_price"> Current price per stock </label> <br>
  
    <%= form.number_field :price, value:@company[:price] , id: "stock_price" %>
  </div>

  <div>
    <%= form.label :number_of_stock, style: "display: block" %>
    <%= form.number_field :number_of_stock, id: "stock_qty", :onkeyup => "qty_function(this.value)" %>
    <%# form.number_field :number_of_stock, id: "stock_qty", :required=>true %>
  </div>

  <div>
    <%= form.label :total_price, style: "display: block" %>
    <%= form.text_field :total_price , id: "total_price", :disabled => true %>
  </div>

  <div>
    <%= form.label :status, style: "display: block" %>
    <%= form.text_field :status ,value: 'ok' %>
  </div>

  <div>
    <%= form.submit %>
  </div>
  <% end %>

  <script> 

  let stock_price = document.getElementById("stock_price");
  let stock_qty = document.getElementById("stock_qty");
  let total_price = document.getElementById("total_price");

 
  function qty_function(e){
      var val = e.keyCode;

      console.log(parseFloat(e)*parseFloat(stock_price.value));
      total_price.value = parseFloat(e)*parseFloat(stock_price.value);

    }


  </script>

